(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5d065037"],{"10ca":function(e,t,n){},"1dde":function(e,t,n){var a=n("d039"),i=n("b622"),s=n("2d00"),o=i("species");e.exports=function(e){return s>=51||!a((function(){var t=[],n=t.constructor={};return n[o]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"344e":function(e,t,n){},"7a42":function(e,t,n){var a={"./ActManage.vue":"da20","./ActPermissManage.vue":"bbfc","./ActRolManage.vue":"a1c7"};function i(e){var t=s(e);return n(t)}function s(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}i.keys=function(){return Object.keys(a)},i.resolve=s,e.exports=i,i.id="7a42"},8418:function(e,t,n){"use strict";var a=n("c04e"),i=n("9bf2"),s=n("5c6c");e.exports=function(e,t,n){var o=a(t);o in e?i.f(e,o,s(0,n)):e[o]=n}},"9afd":function(e,t,n){"use strict";var a=n("10ca"),i=n.n(a);i.a},a1c7:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"search_ipt"},[n("el-input",{staticStyle:{width:"400px","margin-right":"10px"},attrs:{"prefix-icon":"el-icon-search",placeholder:"通过用户名搜索用户....."},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchUser(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),n("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.searchUser}},[e._v("搜索")])],1),n("div",{staticClass:"user_container"},e._l(e.users,(function(t,a){return n("el-card",{key:a,staticClass:"box-card",staticStyle:{width:"350px"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[e._v(e._s(t.username))]),n("el-button",{staticStyle:{float:"right",padding:"3px 0",color:"red"},attrs:{icon:"el-icon-delete"},on:{click:function(n){return e.deleteUser(t.id)}}})],1),n("div",[n("div",{staticClass:"img_container"},[n("img",{staticClass:"usrFace_img",attrs:{src:t.userFace,title:t.name}})]),n("div",{staticClass:"userinfo_container"},[n("div",[e._v("用户账号："+e._s(t.username))]),n("div",[e._v("手机号："+e._s(t.telephone))]),n("div",[e._v("用户地址："+e._s(t.address))]),n("div",[e._v("用户名："+e._s(t.name))]),n("div",[e._v("用户状态： "),n("el-switch",{attrs:{"active-text":"启用","active-color":"#13ce66","inactive-color":"#ff4949","inactive-text":"禁用"},on:{change:function(n){return e.enabledChange(t)}},model:{value:t.enabled,callback:function(n){e.$set(t,"enabled",n)},expression:"user.enabled"}})],1),n("div",[e._v("用户角色： "),e._l(t.roles,(function(t,a){return n("el-tag",{key:a,staticStyle:{"margin-right":"5px"},attrs:{type:"success"}},[e._v(" "+e._s(t.nameZh)+" ")])})),e._v(" "),n("el-popover",{attrs:{placement:"bottom",title:"角色",width:"200",trigger:"click"},on:{show:function(n){return e.showRoles(t.roles)},hide:function(n){return e.updateUserRole(t)}}},[n("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.showCheckeds,callback:function(t){e.showCheckeds=t},expression:"showCheckeds"}},e._l(e.allRoles,(function(e,t){return n("el-option",{key:t,attrs:{label:e.nameZh,value:e.id}})})),1),n("el-button",{attrs:{slot:"reference",icon:"el-icon-more",type:"text"},slot:"reference"})],1)],2)])])])})),1)])},i=[],s=(n("4160"),n("a434"),n("159b"),{data:function(){return{keywords:"",users:[],allRoles:[],showCheckeds:[]}},mounted:function(){this.initUsers()},methods:{searchUser:function(){this.initUsers()},updateUserRole:function(e){var t=this,n=[];Object.assign(n,e.roles);var a=!1;if(n.length!=this.showCheckeds.length)a=!0;else{for(var i=0;i<n.length;i++)for(var s=n[i],o=0;o<this.showCheckeds.length;o++){var c=this.showCheckeds[o];if(s.id==c){n.splice(i,1),i--;break}}0!=n.length&&(a=!0)}if(a){var r="/account/roleManage//updateUser?uid="+e.id;this.showCheckeds.forEach((function(e){r+="&rids="+e})),this.putRequest(r).then((function(e){e&&t.initUsers()}))}},showRoles:function(e){var t=this;this.initRoles(),this.showCheckeds=[],e.forEach((function(e){t.showCheckeds.push(e.id)}))},initRoles:function(){var e=this;this.getRequest("/account/roleManage/allRoles").then((function(t){t&&(e.allRoles=t)}))},initUsers:function(){var e=this;this.getRequest("/account/roleManage/?keywords="+this.keywords).then((function(t){t&&(e.users=t)}))},enabledChange:function(e){var t=this;delete e.roles,this.putRequest("/account/roleManage/",e).then((function(e){e&&t.initUsers()}))},deleteUser:function(e){var t=this;this.deleteRequest("/account/roleManage/"+e).then((function(e){e&&t.initUsers()}))}},name:"ActRolManage"}),o=s,c=(n("9afd"),n("2877")),r=Object(c["a"])(o,a,i,!1,null,null,null);t["default"]=r.exports},a434:function(e,t,n){"use strict";var a=n("23e7"),i=n("23cb"),s=n("a691"),o=n("50c4"),c=n("7b0b"),r=n("65f0"),l=n("8418"),u=n("1dde"),d=n("ae40"),h=u("splice"),f=d("splice",{ACCESSORS:!0,0:0,1:2}),v=Math.max,p=Math.min,m=9007199254740991,g="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!h||!f},{splice:function(e,t){var n,a,u,d,h,f,k=c(this),_=o(k.length),b=i(e,_),y=arguments.length;if(0===y?n=a=0:1===y?(n=0,a=_-b):(n=y-2,a=p(v(s(t),0),_-b)),_+n-a>m)throw TypeError(g);for(u=r(k,a),d=0;d<a;d++)h=b+d,h in k&&l(u,d,k[h]);if(u.length=a,n<a){for(d=b;d<_-a;d++)h=d+a,f=d+n,h in k?k[f]=k[h]:delete k[f];for(d=_;d>_-a+n;d--)delete k[d-1]}else if(n>a)for(d=_-a;d>b;d--)h=d+a-1,f=d+n-1,h in k?k[f]=k[h]:delete k[f];for(d=0;d<n;d++)k[d+b]=arguments[d+2];return k.length=_-a+n,u}})},ade3:function(e,t,n){"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return a}))},bbfc:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"role_ipt"},[n("el-input",{attrs:{placeholder:"请输入角色英文名"},model:{value:e.role.name,callback:function(t){e.$set(e.role,"name",t)},expression:"role.name"}},[n("template",{slot:"prepend"},[e._v("ROLE_")])],2),n("el-input",{attrs:{placeholder:"请输入角色中文名"},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addRole(t)}},model:{value:e.role.nameZh,callback:function(t){e.$set(e.role,"nameZh",t)},expression:"role.nameZh"}}),n("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:e.addRole}},[e._v("添加角色")])],1),n("div",{staticClass:"role_coll"},[n("el-collapse",{directives:[{name:"loading",rawName:"v-loading",value:e.add_loading,expression:"add_loading"}],staticClass:"role_coll",attrs:{accordion:"","element-loading-text":"正在添加...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"},on:{change:e.change},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.roles,(function(t,a){return n("el-collapse-item",{key:a,attrs:{title:t.nameZh,name:t.id}},[n("el-card",{staticClass:"box-card"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[e._v(e._s(t.nameZh))]),n("el-button",{staticStyle:{float:"right",padding:"3px 0",color:"red"},attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(n){return e.deleteRole(t.id)}}})],1),n("div",{staticClass:"text item"},[n("el-tree",{key:a,ref:"tree",refInFor:!0,attrs:{data:e.menus,props:e.defaultProps,"show-checkbox":"","node-key":"id","default-checked-keys":e.checked_menu}}),n("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[n("el-button",{on:{click:e.cancelUpdate}},[e._v("取消修改")]),n("el-button",{attrs:{type:"primary"},on:{click:function(n){return e.doUpdate(t.id,a)}}},[e._v("确认修改")])],1)],1)])],1)})),1)],1)])},i=[],s=(n("4160"),n("b0c0"),n("159b"),n("ade3")),o={data:function(){return Object(s["a"])({role:{name:"",nameZh:""},activeName:1,roles:[],menus:[],defaultProps:{children:"children",label:"name"},loading:!1,add_loading:!1,checked_menu:[]},"activeName",-1)},mounted:function(){this.initRoles()},methods:{addRole:function(){var e=this;this.role.name&&this.role.nameZh?(this.add_loading=!0,this.postRequest("/account/permissManage/add",this.role).then((function(t){e.add_loading=!1,e.role.name="",e.role.nameZh="",e.initRoles()}))):this.$message.error("请输入要添加的角色名")},cancelUpdate:function(){this.activeName=-1},doUpdate:function(e,t){var n=this,a=this.$refs.tree[t],i=a.getCheckedKeys(!0),s="/account/permissManage/?rId="+e;i.length>0?i.forEach((function(e){s+="&ckMenus="+e})):s+="&ckMenus="+[],this.putRequest(s).then((function(e){n.activeName=-1}))},deleteRole:function(e){var t=this;this.$confirm("此操作将永久删除该角色, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.deleteRequest("/account/permissManage/role/"+e).then((function(e){t.initRoles()}))})).catch((function(){t.$message({type:"info",message:"已取消注销"})}))},change:function(e){e&&(this.checked_menu=[],this.initMenus(),this.checkMenus(e))},checkMenus:function(e){var t=this;this.getRequest("/account/permissManage/"+e).then((function(e){t.checked_menu=e}))},initMenus:function(){var e=this;this.getRequest("/account/permissManage/menus").then((function(t){e.menus=t}))},initRoles:function(){var e=this;this.loading=!0,this.getRequest("/account/permissManage/").then((function(t){e.loading=!1,t&&(e.roles=t)}))}},name:"ActPermissManage"},c=o,r=(n("ca4c"),n("2877")),l=Object(r["a"])(c,a,i,!1,null,null,null);t["default"]=l.exports},ca4c:function(e,t,n){"use strict";var a=n("344e"),i=n.n(a);i.a},da20:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v(" account manager ")])},i=[],s={name:"ActManage"},o=s,c=n("2877"),r=Object(c["a"])(o,a,i,!1,null,"1381bcfe",null);t["default"]=r.exports}}]);
//# sourceMappingURL=chunk-5d065037.207930b3.js.map